!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TCQrcode=e():t.TCQrcode=e()}(this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){this.mode=o.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var n=[],i=this.data.charCodeAt(e);i>65536?(n[0]=240|(1835008&i)>>>18,n[1]=128|(258048&i)>>>12,n[2]=128|(4032&i)>>>6,n[3]=128|63&i):i>2048?(n[0]=224|(61440&i)>>>12,n[1]=128|(4032&i)>>>6,n[2]=128|63&i):i>128?(n[0]=192|(1984&i)>>>6,n[1]=128|63&i):n[0]=i,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function a(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}r.r(e),r.d(e,"decodeBindInput",(function(){return S})),r.d(e,"decodeFromFile",(function(){return T})),r.d(e,"decodeFromImage",(function(){return P})),r.d(e,"decodeFromUrl",(function(){return O})),r.d(e,"decodeFromBase64",(function(){return G})),r.d(e,"decodeFromVideo",(function(){return R})),r.d(e,"decodeFromCanvas",(function(){return j})),r.d(e,"encodeAsImage",(function(){return q})),r.d(e,"encodeAsBase64",(function(){return U})),r.d(e,"encodeBindDom",(function(){return X})),i.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}},a.prototype={addData:function(t){var e=new i(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=a.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+r][e+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=g.getLostPoint(this);(0==r||t>n)&&(t=n,e=r)}return e},createMovieClip:function(t,e,r){var n=t.createEmptyMovieClip(e,r);this.make();for(var i=0;i<this.modules.length;i++)for(var a=1*i,o=0;o<this.modules[i].length;o++){var h=1*o;this.modules[i][o]&&(n.beginFill(0,100),n.moveTo(h,a),n.lineTo(h+1,a),n.lineTo(h+1,a+1),n.lineTo(h,a+1),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=g.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],i=t[r];if(null==this.modules[n][i])for(var a=-2;a<=2;a++)for(var o=-2;o<=2;o++)this.modules[n+a][i+o]=-2==a||2==a||-2==o||2==o||0==a&&0==o}},setupTypeNumber:function(t){for(var e=g.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var i=0;i<18;i++){var a=!t&&1==(e>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=a}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=g.getBCHTypeInfo(r),i=0;i<15;i++){var a=!t&&1==(n>>i&1);i<6?this.modules[i][8]=a:i<8?this.modules[i+1][8]=a:this.modules[this.moduleCount-15+i][8]=a}for(var o=0;o<15;o++){var h=!t&&1==(n>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=h:o<9?this.modules[8][15-o-1+1]=h:this.modules[8][15-o-1]=h}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,n=this.moduleCount-1,i=7,a=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var h=0;h<2;h++)if(null==this.modules[n][o-h]){var s=!1;a<t.length&&(s=1==(t[a]>>>i&1)),g.getMask(e,n,o-h)&&(s=!s),this.modules[n][o-h]=s,-1==--i&&(a++,i=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}}},a.PAD0=236,a.PAD1=17,a.createData=function(t,e,r){for(var n=A.getRSBlocks(t,e),i=new M,o=0;o<r.length;o++){var h=r[o];i.put(h.mode,4),i.put(h.getLength(),g.getLengthInBits(h.mode,t)),h.write(i)}for(var s=0,u=0;u<n.length;u++)s+=n[u].dataCount;if(i.getLengthInBits()>8*s)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*s+")");for(i.getLengthInBits()+4<=8*s&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*s||(i.put(a.PAD0,8),i.getLengthInBits()>=8*s));)i.put(a.PAD1,8);return a.createBytes(i,n)},a.createBytes=function(t,e){for(var r=0,n=0,i=0,a=new Array(e.length),o=new Array(e.length),h=0;h<e.length;h++){var s=e[h].dataCount,u=e[h].totalCount-s;n=Math.max(n,s),i=Math.max(i,u),a[h]=new Array(s);for(var f=0;f<a[h].length;f++)a[h][f]=255&t.buffer[f+r];r+=s;var w=g.getErrorCorrectPolynomial(u),_=new b(a[h],w.getLength()-1).mod(w);o[h]=new Array(w.getLength()-1);for(var c=0;c<o[h].length;c++){var d=c+_.getLength()-o[h].length;o[h][c]=d>=0?_.get(d):0}}for(var l=0,v=0;v<e.length;v++)l+=e[v].totalCount;for(var m=new Array(l),p=0,y=0;y<n;y++)for(var A=0;A<e.length;A++)y<a[A].length&&(m[p++]=a[A][y]);for(var M=0;M<i;M++)for(var C=0;C<e.length;C++)M<o[C].length&&(m[p++]=o[C][M]);return m};for(var o={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},h={L:1,M:0,Q:3,H:2},s=0,u=1,f=2,w=3,_=4,c=5,d=6,l=7,g={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;g.getBCHDigit(e)-g.getBCHDigit(g.G15)>=0;)e^=g.G15<<g.getBCHDigit(e)-g.getBCHDigit(g.G15);return(t<<10|e)^g.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;g.getBCHDigit(e)-g.getBCHDigit(g.G18)>=0;)e^=g.G18<<g.getBCHDigit(e)-g.getBCHDigit(g.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return g.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case s:return(e+r)%2==0;case u:return e%2==0;case f:return r%3==0;case w:return(e+r)%3==0;case _:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case c:return e*r%2+e*r%3==0;case d:return(e*r%2+e*r%3)%2==0;case l:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new b([1],0),r=0;r<t;r++)e=e.multiply(new b([1,v.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:case o.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var a=0,o=t.isDark(n,i),h=-1;h<=1;h++)if(!(n+h<0||e<=n+h))for(var s=-1;s<=1;s++)i+s<0||e<=i+s||0==h&&0==s||o==t.isDark(n+h,i+s)&&a++;a>5&&(r+=3+a-5)}for(var u=0;u<e-1;u++)for(var f=0;f<e-1;f++){var w=0;t.isDark(u,f)&&w++,t.isDark(u+1,f)&&w++,t.isDark(u,f+1)&&w++,t.isDark(u+1,f+1)&&w++,0!=w&&4!=w||(r+=3)}for(var _=0;_<e;_++)for(var c=0;c<e-6;c++)t.isDark(_,c)&&!t.isDark(_,c+1)&&t.isDark(_,c+2)&&t.isDark(_,c+3)&&t.isDark(_,c+4)&&!t.isDark(_,c+5)&&t.isDark(_,c+6)&&(r+=40);for(var d=0;d<e;d++)for(var l=0;l<e-6;l++)t.isDark(l,d)&&!t.isDark(l+1,d)&&t.isDark(l+2,d)&&t.isDark(l+3,d)&&t.isDark(l+4,d)&&!t.isDark(l+5,d)&&t.isDark(l+6,d)&&(r+=40);for(var g=0,v=0;v<e;v++)for(var m=0;m<e;m++)t.isDark(m,v)&&g++;return r+=10*(Math.abs(100*g/e/e-50)/5)}},v={glog:function(t){if(t<1)throw new Error("glog("+t+")");return v.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return v.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)v.EXP_TABLE[m]=1<<m;for(var p=8;p<256;p++)v.EXP_TABLE[p]=v.EXP_TABLE[p-4]^v.EXP_TABLE[p-5]^v.EXP_TABLE[p-6]^v.EXP_TABLE[p-8];for(var y=0;y<255;y++)v.LOG_TABLE[v.EXP_TABLE[y]]=y;function b(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}function A(t,e){this.totalCount=t,this.dataCount=e}function M(){this.buffer=[],this.length=0}b.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=v.gexp(v.glog(this.get(r))+v.glog(t.get(n)));return new b(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=v.glog(this.get(0))-v.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var i=0;i<t.getLength();i++)r[i]^=v.gexp(v.glog(t.get(i))+e);return new b(r,0).mod(t)}},A.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],A.getRSBlocks=function(t,e){var r=A.getRsBlockTable(t,e);if(null==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,i=[],a=0;a<n;a++)for(var o=r[3*a+0],h=r[3*a+1],s=r[3*a+2],u=0;u<o;u++)i.push(new A(h,s));return i},A.getRsBlockTable=function(t,e){switch(e){case h.L:return A.RS_BLOCK_TABLE[4*(t-1)+0];case h.M:return A.RS_BLOCK_TABLE[4*(t-1)+1];case h.Q:return A.RS_BLOCK_TABLE[4*(t-1)+2];case h.H:return A.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},M.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var C=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function E(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var r=e.toString().match(/android ([0-9]\.[0-9])/i);r&&r[1]&&(t=parseFloat(r[1]))}return t}var k=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,r=this._el,n=t.getModuleCount();function i(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)e.hasOwnProperty(n)&&r.setAttribute(n,e[n]);return r}this.clear();var a=i("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:e.colorLight});a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.appendChild(a),a.appendChild(i("rect",{fill:e.colorLight,width:"100%",height:"100%"})),a.appendChild(i("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var o=0;o<n;o++)for(var h=0;h<n;h++)if(t.isDark(o,h)){var s=i("use",{x:String(h),y:String(o)});s.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),a.appendChild(s)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),D="svg"===document.documentElement.tagName.toLowerCase()?k:"undefined"==typeof CanvasRenderingContext2D?function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,r=this._el,n=t.getModuleCount(),i=Math.floor(e.width/n),a=Math.floor(e.height/n),o=['<table style="border:0;border-collapse:collapse;">'],h=0;h<n;h++){o.push("<tr>");for(var s=0;s<n;s++)o.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+a+"px;background-color:"+(t.isDark(h,s)?e.colorDark:e.colorLight)+';"></td>');o.push("</tr>")}o.push("</table>"),r.innerHTML=o.join("");var u=r.childNodes[0],f=(e.width-u.offsetWidth)/2,w=(e.height-u.offsetHeight)/2;f>0&&w>0&&(u.style.margin=w+"px "+f+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}():function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}var e=E();if(e&&e<=2.1){var r=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,i,a,o,h,s,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var f=arguments.length-1;f>=1;f--)arguments[f]=arguments[f]*r;else void 0===u&&(arguments[1]*=r,arguments[2]*=r,arguments[3]*=r,arguments[4]*=r);n.apply(this,arguments)}}function i(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){var n=document.createElement("img"),i=function(){r._bSupportDataURI=!1,r._fFail&&r._fFail.call(r)};return n.onabort=i,n.onerror=i,n.onload=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)},void(n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===r._bSupportDataURI&&r._fSuccess?r._fSuccess.call(r):!1===r._bSupportDataURI&&r._fFail&&r._fFail.call(r)}var a=function(t,e){this._bIsPainted=!1,this._android=E(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return a.prototype.draw=function(t){var e=this._elImage,r=this._oContext,n=this._htOption,i=t.getModuleCount(),a=n.width/i,o=n.height/i,h=Math.round(a),s=Math.round(o);e.style.display="none",this.clear();for(var u=0;u<i;u++)for(var f=0;f<i;f++){var w=t.isDark(u,f),_=f*a,c=u*o;r.strokeStyle=w?n.colorDark:n.colorLight,r.lineWidth=1,r.fillStyle=w?n.colorDark:n.colorLight,r.fillRect(_,c,a,o),r.strokeRect(Math.floor(_)+.5,Math.floor(c)+.5,h,s),r.strokeRect(Math.ceil(_)-.5,Math.ceil(c)-.5,h,s)}this._bIsPainted=!0},a.prototype.makeImage=function(){this._bIsPainted&&i.call(this,t)},a.prototype.isPainted=function(){return this._bIsPainted},a.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},a.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},a}();function B(t,e){for(var r=1,n=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),i=0,a=C.length;i<=a;i++){var o=0;switch(e){case h.L:o=C[i][0];break;case h.M:o=C[i][1];break;case h.Q:o=C[i][2];break;case h.H:o=C[i][3]}if(n<=o)break;r++}if(r>C.length)throw new Error("Too long data");return r}var N=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:h.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(D=k),this._android=E(),this._el=t,this._oQRCode=null,this._oDrawing=new D(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)};N.prototype.makeCode=function(t){this._oQRCode=new a(B(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},N.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},N.prototype.clear=function(){this._oDrawing.clear()},N.CorrectLevel=h;var L=N,x=function(t,e,r,n){return new(r||(r=Promise))((function(i,a){function o(t){try{s(n.next(t))}catch(t){a(t)}}function h(t){try{s(n.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,h)}s((n=n.apply(t,e||[])).next())}))},I=function(t,e){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function h(a){return function(h){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}};function S(t,e){t.onchange=function(){var r=t.files;if(r)for(var n=0;n<r.length;n++)T(r[0]).then((function(t){e(t)}))}}function T(t){return O((window.URL||window.webkitURL).createObjectURL(t))}function P(t){return O(t.src)}function O(t){return new Promise((function(e){var r=function(){var t={};function e(t,e){this.count=t,this._fc=e,this.__defineGetter__("Count",(function(){return this.count})),this.__defineGetter__("_dm",(function(){return this._fc}))}function r(t,e,r){this._bm=t,this._do=r?new Array(e,r):new Array(e),this.__defineGetter__("_bo",(function(){return this._bm})),this.__defineGetter__("_dn",(function(){return this._bm*this._fo})),this.__defineGetter__("_fo",(function(){for(var t=0,e=0;e<this._do.length;e++)t+=this._do[e].length;return t})),this._fb=function(){return this._do}}function i(t,e,r,n,i,a){this._bs=t,this._ar=e,this._do=new Array(r,n,i,a);for(var o=0,h=r._bo,s=r._fb(),u=0;u<s.length;u++){var f=s[u];o+=f.Count*(f._dm+h)}this._br=o,this.__defineGetter__("_fd",(function(){return this._bs})),this.__defineGetter__("_as",(function(){return this._ar})),this.__defineGetter__("_dp",(function(){return this._br})),this.__defineGetter__("_cr",(function(){return 17+4*this._bs})),this._aq=function(){var t=this._cr,e=new v(t);e._bq(0,0,9,9),e._bq(t-8,0,8,9),e._bq(0,t-8,9,8);for(var r=this._ar.length,n=0;n<r;n++)for(var i=this._ar[n]-2,a=0;a<r;a++)0==n&&(0==a||a==r-1)||n==r-1&&0==a||e._bq(this._ar[a]-2,i,5,5);return e._bq(6,9,1,t-17),e._bq(9,6,t-17,1),this._bs>6&&(e._bq(t-11,0,3,6),e._bq(0,t-11,6,3)),e},this._bu=function(t){return this._do[t.ordinal()]}}function a(t,e,r,n,i,o,h,s,u){this.a11=t,this.a12=n,this.a13=h,this.a21=e,this.a22=i,this.a23=s,this.a31=r,this.a32=o,this.a33=u,this._ad=function(t){for(var e=t.length,r=this.a11,n=this.a12,i=this.a13,a=this.a21,o=this.a22,h=this.a23,s=this.a31,u=this.a32,f=this.a33,w=0;w<e;w+=2){var _=t[w],c=t[w+1],d=i*_+h*c+f;t[w]=(r*_+a*c+s)/d,t[w+1]=(n*_+o*c+u)/d}},this._fp=function(t,e){for(var r=t.length,n=0;n<r;n++){var i=t[n],a=e[n],o=this.a13*i+this.a23*a+this.a33;t[n]=(this.a11*i+this.a21*a+this.a31)/o,e[n]=(this.a12*i+this.a22*a+this.a32)/o}},this._fr=function(){return new a(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(t){return new a(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}function o(t,e){this.bits=t,this.points=e}function h(e){this.image=e,this._am=null,this._bi=function(t,e,r,n){var i=Math.abs(n-e)>Math.abs(r-t);if(i){var a=t;t=e,e=a,a=r,r=n,n=a}for(var o=Math.abs(r-t),h=Math.abs(n-e),s=-o>>1,u=e<n?1:-1,f=t<r?1:-1,w=0,_=t,c=e;_!=r;_+=f){var d=i?c:_,l=i?_:c;if(1==w?this.image[d+l*C.width]&&w++:this.image[d+l*C.width]||w++,3==w){var g=_-t,v=c-e;return Math.sqrt(g*g+v*v)}if((s+=h)>0){if(c==n)break;c+=u,s-=o}}var m=r-t,p=n-e;return Math.sqrt(m*m+p*p)},this._bh=function(t,e,r,n){var i=this._bi(t,e,r,n),a=1,o=t-(r-t);o<0?(a=t/(t-o),o=0):o>=C.width&&(a=(C.width-1-t)/(o-t),o=C.width-1);var h=Math.floor(e-(n-e)*a);return a=1,h<0?(a=e/(e-h),h=0):h>=C.height&&(a=(C.height-1-e)/(h-e),h=C.height-1),o=Math.floor(t+(o-t)*a),(i+=this._bi(t,e,o,h))-1},this._bj=function(t,e){var r=this._bh(Math.floor(t.X),Math.floor(t.Y),Math.floor(e.X),Math.floor(e.Y)),n=this._bh(Math.floor(e.X),Math.floor(e.Y),Math.floor(t.X),Math.floor(t.Y));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14},this._bk=function(t,e,r){return(this._bj(t,e)+this._bj(t,r))/2},this.distance=function(t,e){var r=t.X-e.X,n=t.Y-e.Y;return Math.sqrt(r*r+n*n)},this._bx=function(t,e,r,n){var i=7+(Math.round(this.distance(t,e)/n)+Math.round(this.distance(t,r)/n)>>1);switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw"Error"}return i},this._bl=function(t,e,r,n){var i=Math.floor(n*t),a=Math.max(0,e-i),o=Math.min(C.width-1,e+i);if(o-a<3*t)throw"Error";var h=Math.max(0,r-i),s=Math.min(C.height-1,r+i);return new L(this.image,a,h,o-a,s-h,t,this._am).find()},this.createTransform=function(t,e,r,n,i){var o,h,s,u,f=i-3.5;return null!=n?(o=n.X,h=n.Y,s=u=f-3):(o=e.X-t.X+r.X,h=e.Y-t.Y+r.Y,s=u=f),a._ag(3.5,3.5,f,3.5,s,u,3.5,f,t.X,t.Y,e.X,e.Y,o,h,r.X,r.Y)},this._bz=function(e,r,n){return t._af(e,n,r)},this._cd=function(t){var e=t._gq,r=t._gs,n=t._gp,a=this._bk(e,r,n);if(a<1)throw"Error";var h=this._bx(e,r,n,a),s=i._at(h),u=s._cr-7,f=null;if(s._as.length>0)for(var w=r.X-e.X+n.X,_=r.Y-e.Y+n.Y,c=1-3/u,d=Math.floor(e.X+c*(w-e.X)),l=Math.floor(e.Y+c*(_-e.Y)),g=4;g<=16;g<<=1){f=this._bl(a,d,l,g);break}var v=this.createTransform(e,r,n,f,h);return new o(this._bz(this.image,v,h),null==f?new Array(n,e,r):new Array(n,e,r,f))},this.detect=function(){var t=(new B)._ce(this.image);return this._cd(t)}}t._ab=function(t,e){for(var r=C.width,n=C.height,i=!0,a=0;a<e.length&&i;a+=2){var o=Math.floor(e[a]),h=Math.floor(e[a+1]);if(o<-1||o>r||h<-1||h>n)throw"Error._ab ";i=!1,-1==o?(e[a]=0,i=!0):o==r&&(e[a]=r-1,i=!0),-1==h?(e[a+1]=0,i=!0):h==n&&(e[a+1]=n-1,i=!0)}i=!0;for(var s=e.length-2;s>=0&&i;s-=2){var u=Math.floor(e[s]),f=Math.floor(e[s+1]);if(u<-1||u>r||f<-1||f>n)throw"Error._ab ";i=!1,-1==u?(e[s]=0,i=!0):u==r&&(e[s]=r-1,i=!0),-1==f?(e[s+1]=0,i=!0):f==n&&(e[s+1]=n-1,i=!0)}},t._af=function(e,r,n){for(var i=new v(r),a=new Array(r<<1),o=0;o<r;o++){for(var h=a.length,s=o+.5,u=0;u<h;u+=2)a[u]=.5+(u>>1),a[u+1]=s;n._ad(a),t._ab(e,a);try{for(var f=0;f<h;f+=2){e[Math.floor(a[f])+C.width*Math.floor(a[f+1])]&&i._dq(f>>1,o)}}catch(t){throw"Error._ab"}}return i},t._ah=function(e,r,n,i,o,h,s,u,f,w,_,c,d,l,g,v,m,p){var y=a._ag(n,i,o,h,s,u,f,w,_,c,d,l,g,v,m,p);return t._af(e,r,y)},i._bv=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),i.VERSIONS=new Array(new i(1,new Array,new r(7,new e(1,19)),new r(10,new e(1,16)),new r(13,new e(1,13)),new r(17,new e(1,9))),new i(2,new Array(6,18),new r(10,new e(1,34)),new r(16,new e(1,28)),new r(22,new e(1,22)),new r(28,new e(1,16))),new i(3,new Array(6,22),new r(15,new e(1,55)),new r(26,new e(1,44)),new r(18,new e(2,17)),new r(22,new e(2,13))),new i(4,new Array(6,26),new r(20,new e(1,80)),new r(18,new e(2,32)),new r(26,new e(2,24)),new r(16,new e(4,9))),new i(5,new Array(6,30),new r(26,new e(1,108)),new r(24,new e(2,43)),new r(18,new e(2,15),new e(2,16)),new r(22,new e(2,11),new e(2,12))),new i(6,new Array(6,34),new r(18,new e(2,68)),new r(16,new e(4,27)),new r(24,new e(4,19)),new r(28,new e(4,15))),new i(7,new Array(6,22,38),new r(20,new e(2,78)),new r(18,new e(4,31)),new r(18,new e(2,14),new e(4,15)),new r(26,new e(4,13),new e(1,14))),new i(8,new Array(6,24,42),new r(24,new e(2,97)),new r(22,new e(2,38),new e(2,39)),new r(22,new e(4,18),new e(2,19)),new r(26,new e(4,14),new e(2,15))),new i(9,new Array(6,26,46),new r(30,new e(2,116)),new r(22,new e(3,36),new e(2,37)),new r(20,new e(4,16),new e(4,17)),new r(24,new e(4,12),new e(4,13))),new i(10,new Array(6,28,50),new r(18,new e(2,68),new e(2,69)),new r(26,new e(4,43),new e(1,44)),new r(24,new e(6,19),new e(2,20)),new r(28,new e(6,15),new e(2,16))),new i(11,new Array(6,30,54),new r(20,new e(4,81)),new r(30,new e(1,50),new e(4,51)),new r(28,new e(4,22),new e(4,23)),new r(24,new e(3,12),new e(8,13))),new i(12,new Array(6,32,58),new r(24,new e(2,92),new e(2,93)),new r(22,new e(6,36),new e(2,37)),new r(26,new e(4,20),new e(6,21)),new r(28,new e(7,14),new e(4,15))),new i(13,new Array(6,34,62),new r(26,new e(4,107)),new r(22,new e(8,37),new e(1,38)),new r(24,new e(8,20),new e(4,21)),new r(22,new e(12,11),new e(4,12))),new i(14,new Array(6,26,46,66),new r(30,new e(3,115),new e(1,116)),new r(24,new e(4,40),new e(5,41)),new r(20,new e(11,16),new e(5,17)),new r(24,new e(11,12),new e(5,13))),new i(15,new Array(6,26,48,70),new r(22,new e(5,87),new e(1,88)),new r(24,new e(5,41),new e(5,42)),new r(30,new e(5,24),new e(7,25)),new r(24,new e(11,12),new e(7,13))),new i(16,new Array(6,26,50,74),new r(24,new e(5,98),new e(1,99)),new r(28,new e(7,45),new e(3,46)),new r(24,new e(15,19),new e(2,20)),new r(30,new e(3,15),new e(13,16))),new i(17,new Array(6,30,54,78),new r(28,new e(1,107),new e(5,108)),new r(28,new e(10,46),new e(1,47)),new r(28,new e(1,22),new e(15,23)),new r(28,new e(2,14),new e(17,15))),new i(18,new Array(6,30,56,82),new r(30,new e(5,120),new e(1,121)),new r(26,new e(9,43),new e(4,44)),new r(28,new e(17,22),new e(1,23)),new r(28,new e(2,14),new e(19,15))),new i(19,new Array(6,30,58,86),new r(28,new e(3,113),new e(4,114)),new r(26,new e(3,44),new e(11,45)),new r(26,new e(17,21),new e(4,22)),new r(26,new e(9,13),new e(16,14))),new i(20,new Array(6,34,62,90),new r(28,new e(3,107),new e(5,108)),new r(26,new e(3,41),new e(13,42)),new r(30,new e(15,24),new e(5,25)),new r(28,new e(15,15),new e(10,16))),new i(21,new Array(6,28,50,72,94),new r(28,new e(4,116),new e(4,117)),new r(26,new e(17,42)),new r(28,new e(17,22),new e(6,23)),new r(30,new e(19,16),new e(6,17))),new i(22,new Array(6,26,50,74,98),new r(28,new e(2,111),new e(7,112)),new r(28,new e(17,46)),new r(30,new e(7,24),new e(16,25)),new r(24,new e(34,13))),new i(23,new Array(6,30,54,74,102),new r(30,new e(4,121),new e(5,122)),new r(28,new e(4,47),new e(14,48)),new r(30,new e(11,24),new e(14,25)),new r(30,new e(16,15),new e(14,16))),new i(24,new Array(6,28,54,80,106),new r(30,new e(6,117),new e(4,118)),new r(28,new e(6,45),new e(14,46)),new r(30,new e(11,24),new e(16,25)),new r(30,new e(30,16),new e(2,17))),new i(25,new Array(6,32,58,84,110),new r(26,new e(8,106),new e(4,107)),new r(28,new e(8,47),new e(13,48)),new r(30,new e(7,24),new e(22,25)),new r(30,new e(22,15),new e(13,16))),new i(26,new Array(6,30,58,86,114),new r(28,new e(10,114),new e(2,115)),new r(28,new e(19,46),new e(4,47)),new r(28,new e(28,22),new e(6,23)),new r(30,new e(33,16),new e(4,17))),new i(27,new Array(6,34,62,90,118),new r(30,new e(8,122),new e(4,123)),new r(28,new e(22,45),new e(3,46)),new r(30,new e(8,23),new e(26,24)),new r(30,new e(12,15),new e(28,16))),new i(28,new Array(6,26,50,74,98,122),new r(30,new e(3,117),new e(10,118)),new r(28,new e(3,45),new e(23,46)),new r(30,new e(4,24),new e(31,25)),new r(30,new e(11,15),new e(31,16))),new i(29,new Array(6,30,54,78,102,126),new r(30,new e(7,116),new e(7,117)),new r(28,new e(21,45),new e(7,46)),new r(30,new e(1,23),new e(37,24)),new r(30,new e(19,15),new e(26,16))),new i(30,new Array(6,26,52,78,104,130),new r(30,new e(5,115),new e(10,116)),new r(28,new e(19,47),new e(10,48)),new r(30,new e(15,24),new e(25,25)),new r(30,new e(23,15),new e(25,16))),new i(31,new Array(6,30,56,82,108,134),new r(30,new e(13,115),new e(3,116)),new r(28,new e(2,46),new e(29,47)),new r(30,new e(42,24),new e(1,25)),new r(30,new e(23,15),new e(28,16))),new i(32,new Array(6,34,60,86,112,138),new r(30,new e(17,115)),new r(28,new e(10,46),new e(23,47)),new r(30,new e(10,24),new e(35,25)),new r(30,new e(19,15),new e(35,16))),new i(33,new Array(6,30,58,86,114,142),new r(30,new e(17,115),new e(1,116)),new r(28,new e(14,46),new e(21,47)),new r(30,new e(29,24),new e(19,25)),new r(30,new e(11,15),new e(46,16))),new i(34,new Array(6,34,62,90,118,146),new r(30,new e(13,115),new e(6,116)),new r(28,new e(14,46),new e(23,47)),new r(30,new e(44,24),new e(7,25)),new r(30,new e(59,16),new e(1,17))),new i(35,new Array(6,30,54,78,102,126,150),new r(30,new e(12,121),new e(7,122)),new r(28,new e(12,47),new e(26,48)),new r(30,new e(39,24),new e(14,25)),new r(30,new e(22,15),new e(41,16))),new i(36,new Array(6,24,50,76,102,128,154),new r(30,new e(6,121),new e(14,122)),new r(28,new e(6,47),new e(34,48)),new r(30,new e(46,24),new e(10,25)),new r(30,new e(2,15),new e(64,16))),new i(37,new Array(6,28,54,80,106,132,158),new r(30,new e(17,122),new e(4,123)),new r(28,new e(29,46),new e(14,47)),new r(30,new e(49,24),new e(10,25)),new r(30,new e(24,15),new e(46,16))),new i(38,new Array(6,32,58,84,110,136,162),new r(30,new e(4,122),new e(18,123)),new r(28,new e(13,46),new e(32,47)),new r(30,new e(48,24),new e(14,25)),new r(30,new e(42,15),new e(32,16))),new i(39,new Array(6,26,54,82,110,138,166),new r(30,new e(20,117),new e(4,118)),new r(28,new e(40,47),new e(7,48)),new r(30,new e(43,24),new e(22,25)),new r(30,new e(10,15),new e(67,16))),new i(40,new Array(6,30,58,86,114,142,170),new r(30,new e(19,118),new e(6,119)),new r(28,new e(18,47),new e(31,48)),new r(30,new e(34,24),new e(34,25)),new r(30,new e(20,15),new e(61,16)))),i._av=function(t){if(t<1||t>40)throw"bad arguments";return i.VERSIONS[t-1]},i._at=function(t){if(t%4!=1)throw"Error _at";try{return i._av(t-17>>2)}catch(t){throw"Error _av"}},i._aw=function(t){for(var e=4294967295,r=0,n=0;n<i._bv.length;n++){var a=i._bv[n];if(a==t)return this._av(n+7);var o=f._gj(t,a);o<e&&(r=n+7,e=o)}return e<=3?this._av(r):null},a._ag=function(t,e,r,n,i,a,o,h,s,u,f,w,_,c,d,l){var g=this._be(t,e,r,n,i,a,o,h);return this._bf(s,u,f,w,_,c,d,l).times(g)},a._bf=function(t,e,r,n,i,o,h,s){var u=s-o,f=e-n+o-s;if(0==u&&0==f)return new a(r-t,i-r,t,n-e,o-n,e,0,0,1);var w=r-i,_=h-i,c=t-r+i-h,d=n-o,l=w*u-_*d,g=(c*u-_*f)/l,v=(w*f-c*d)/l;return new a(r-t+g*r,h-t+v*h,t,n-e+g*n,s-e+v*s,e,g,v,1)},a._be=function(t,e,r,n,i,a,o,h){return this._bf(t,e,r,n,i,a,o,h)._fr()};var s=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),u=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);function f(t){this._cf=w.forBits(t>>3&3),this._fe=7&t,this.__defineGetter__("_cg",(function(){return this._cf})),this.__defineGetter__("_dx",(function(){return this._fe})),this.GetHashCode=function(){return this._cf.ordinal()<<3|this._fe},this.Equals=function(t){var e=t;return this._cf==e._cf&&this._fe==e._fe}}function w(t,e,r){this._ff=t,this.bits=e,this.name=r,this.__defineGetter__("Bits",(function(){return this.bits})),this.__defineGetter__("Name",(function(){return this.name})),this.ordinal=function(){return this._ff}}f._gj=function(t,e){return u[15&(t^=e)]+u[15&E(t,4)]+u[15&E(t,8)]+u[15&E(t,12)]+u[15&E(t,16)]+u[15&E(t,20)]+u[15&E(t,24)]+u[15&E(t,28)]},f._ci=function(t){var e=f._cj(t);return null!=e?e:f._cj(21522^t)},f._cj=function(t){for(var e=4294967295,r=0,n=0;n<s.length;n++){var i=s[n],a=i[0];if(a==t)return new f(i[1]);var o=this._gj(t,a);o<e&&(r=i[1],e=o)}return e<=3?new f(r):null},w.forBits=function(t){if(t<0||t>=g.length)throw"bad arguments";return g[t]};var _=new w(0,1,"L"),c=new w(1,0,"M"),d=new w(2,3,"Q"),l=new w(3,2,"H"),g=new Array(c,_,l,d);function v(t,e){if(e||(e=t),t<1||e<1)throw"Both dimensions must be greater than 0";this.width=t,this.height=e;var r=t>>5;0!=(31&t)&&r++,this.rowSize=r,this.bits=new Array(r*e);for(var n=0;n<this.bits.length;n++)this.bits[n]=0;this.__defineGetter__("Width",(function(){return this.width})),this.__defineGetter__("Height",(function(){return this.height})),this.__defineGetter__("Dimension",(function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width})),this._ds=function(t,e){var r=e*this.rowSize+(t>>5);return 0!=(1&E(this.bits[r],31&t))},this._dq=function(t,e){var r=e*this.rowSize+(t>>5);this.bits[r]|=1<<(31&t)},this.flip=function(t,e){var r=e*this.rowSize+(t>>5);this.bits[r]^=1<<(31&t)},this.clear=function(){for(var t=this.bits.length,e=0;e<t;e++)this.bits[e]=0},this._bq=function(t,e,r,n){if(e<0||t<0)throw"Left and top must be nonnegative";if(n<1||r<1)throw"Height and width must be at least 1";var i=t+r,a=e+n;if(a>this.height||i>this.width)throw"The region must fit inside the matrix";for(var o=e;o<a;o++)for(var h=o*this.rowSize,s=t;s<i;s++)this.bits[h+(s>>5)]|=1<<(31&s)}}function m(t,e){this._dv=t,this._dw=e,this.__defineGetter__("_du",(function(){return this._dv})),this.__defineGetter__("Codewords",(function(){return this._dw}))}function p(t){var e=t.Dimension;if(e<21||1!=(3&e))throw"Error _cl";this._au=t,this._cp=null,this._co=null,this._dk=function(t,e,r){return this._au._ds(t,e)?r<<1|1:r<<1},this._cm=function(){if(null!=this._co)return this._co;for(var t=0,e=0;e<6;e++)t=this._dk(e,8,t);t=this._dk(7,8,t),t=this._dk(8,8,t),t=this._dk(8,7,t);for(var r=5;r>=0;r--)t=this._dk(8,r,t);if(this._co=f._ci(t),null!=this._co)return this._co;var n=this._au.Dimension;t=0;for(var i=n-8,a=n-1;a>=i;a--)t=this._dk(a,8,t);for(var o=n-7;o<n;o++)t=this._dk(8,o,t);if(this._co=f._ci(t),null!=this._co)return this._co;throw"Error _cm"},this._cq=function(){if(null!=this._cp)return this._cp;var t=this._au.Dimension,e=t-17>>2;if(e<=6)return i._av(e);for(var r=0,n=t-11,a=5;a>=0;a--)for(var o=t-9;o>=n;o--)r=this._dk(o,a,r);if(this._cp=i._aw(r),null!=this._cp&&this._cp._cr==t)return this._cp;r=0;for(var h=5;h>=0;h--)for(var s=t-9;s>=n;s--)r=this._dk(h,s,r);if(this._cp=i._aw(r),null!=this._cp&&this._cp._cr==t)return this._cp;throw"Error _cq"},this._gk=function(){var t=this._cm(),e=this._cq(),r=y._gl(t._dx),n=this._au.Dimension;r._dj(this._au,n);for(var i=e._aq(),a=!0,o=new Array(e._dp),h=0,s=0,u=0,f=n-1;f>0;f-=2){6==f&&f--;for(var w=0;w<n;w++)for(var _=a?n-1-w:w,c=0;c<2;c++)i._ds(f-c,_)||(u++,s<<=1,this._au._ds(f-c,_)&&(s|=1),8==u&&(o[h++]=s,u=0,s=0));a^=!0}if(h!=e._dp)throw"Error _gk";return o}}m._gn=function(t,e,r){if(t.length!=e._dp)throw"bad arguments";for(var n=e._bu(r),i=0,a=n._fb(),o=0;o<a.length;o++)i+=a[o].Count;for(var h=new Array(i),s=0,u=0;u<a.length;u++)for(var f=a[u],w=0;w<f.Count;w++){var _=f._dm,c=n._bo+_;h[s++]=new m(_,new Array(c))}for(var d=h[0]._dw.length,l=h.length-1;l>=0;){if(h[l]._dw.length==d)break;l--}l++;for(var g=d-n._bo,v=0,p=0;p<g;p++)for(var y=0;y<s;y++)h[y]._dw[p]=t[v++];for(var b=l;b<s;b++)h[b]._dw[g]=t[v++];for(var A=h[0]._dw.length,M=g;M<A;M++)for(var C=0;C<s;C++){var E=C<l?M:M+1;h[C]._dw[E]=t[v++]}return h};var y={};function b(t,e){if(null==e||0==e.length)throw"bad arguments";this._fa=t;var r=e.length;if(r>1&&0==e[0]){for(var n=1;n<r&&0==e[n];)n++;if(n==r)this._dd=t.Zero._dd;else{this._dd=new Array(r-n);for(var i=0;i<this._dd.length;i++)this._dd[i]=0;for(var a=0;a<this._dd.length;a++)this._dd[a]=e[n+a]}}else this._dd=e;this.__defineGetter__("Zero",(function(){return 0==this._dd[0]})),this.__defineGetter__("_ec",(function(){return this._dd.length-1})),this.__defineGetter__("Coefficients",(function(){return this._dd})),this._ex=function(t){return this._dd[this._dd.length-1-t]},this.evaluateAt=function(t){if(0==t)return this._ex(0);var e=this._dd.length;if(1==t){for(var r=0,n=0;n<e;n++)r=A._bd(r,this._dd[n]);return r}for(var i=this._dd[0],a=1;a<e;a++)i=A._bd(this._fa.multiply(t,i),this._dd[a]);return i},this._bd=function(e){if(this._fa!=e._fa)throw"GF256Polys do not have same _az _fa";if(this.Zero)return e;if(e.Zero)return this;var r=this._dd,n=e._dd;if(r.length>n.length){var i=r;r=n,n=i}for(var a=new Array(n.length),o=n.length-r.length,h=0;h<o;h++)a[h]=n[h];for(var s=o;s<n.length;s++)a[s]=A._bd(r[s-o],n[s]);return new b(t,a)},this.multiply1=function(t){if(this._fa!=t._fa)throw"GF256Polys do not have same _az _fa";if(this.Zero||t.Zero)return this._fa.Zero;for(var e=this._dd,r=e.length,n=t._dd,i=n.length,a=new Array(r+i-1),o=0;o<r;o++)for(var h=e[o],s=0;s<i;s++)a[o+s]=A._bd(a[o+s],this._fa.multiply(h,n[s]));return new b(this._fa,a)},this.multiply2=function(t){if(0==t)return this._fa.Zero;if(1==t)return this;for(var e=this._dd.length,r=new Array(e),n=0;n<e;n++)r[n]=this._fa.multiply(this._dd[n],t);return new b(this._fa,r)},this._dc=function(t,e){if(t<0)throw"bad arguments";if(0==e)return this._fa.Zero;for(var r=this._dd.length,n=new Array(r+t),i=0;i<n.length;i++)n[i]=0;for(var a=0;a<r;a++)n[a]=this._fa.multiply(this._dd[a],e);return new b(this._fa,n)},this.divide=function(t){if(this._fa!=t._fa)throw"GF256Polys do not have same _az _fa";if(t.Zero)throw"Divide by 0";for(var e=this._fa.Zero,r=this,n=t._ex(t._ec),i=this._fa.inverse(n);r._ec>=t._ec&&!r.Zero;){var a=r._ec-t._ec,o=this._fa.multiply(r._ex(r._ec),i),h=t._dc(a,o),s=this._fa._ba(a,o);e=e._bd(s),r=r._bd(h)}return new Array(e,r)}}function A(t){this._gh=new Array(256),this._gi=new Array(256);for(var e=1,r=0;r<256;r++)this._gh[r]=e,(e<<=1)>=256&&(e^=t);for(var n=0;n<255;n++)this._gi[this._gh[n]]=n;var i=new Array(1);i[0]=0,this.zero=new b(this,new Array(i));var a=new Array(1);a[0]=1,this.one=new b(this,new Array(a)),this.__defineGetter__("Zero",(function(){return this.zero})),this.__defineGetter__("One",(function(){return this.one})),this._ba=function(t,e){if(t<0)throw"bad arguments";if(0==e)return this.zero;for(var r=new Array(t+1),n=0;n<r.length;n++)r[n]=0;return r[0]=e,new b(this,r)},this.exp=function(t){return this._gh[t]},this.log=function(t){if(0==t)throw"bad arguments";return this._gi[t]},this.inverse=function(t){if(0==t)throw"System.ArithmeticException";return this._gh[255-this._gi[t]]},this.multiply=function(t,e){return 0==t||0==e?0:1==t?e:1==e?t:this._gh[(this._gi[t]+this._gi[e])%255]}}y._gl=function(t){if(t<0||t>7)throw"bad arguments";return y._dy[t]},y._dy=new Array(new function(){this._dj=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this._fw(r,n)&&t.flip(n,r)},this._fw=function(t,e){return 0==(t+e&1)}},new function(){this._dj=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this._fw(r,n)&&t.flip(n,r)},this._fw=function(t){return 0==(1&t)}},new function(){this._dj=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this._fw(r,n)&&t.flip(n,r)},this._fw=function(t,e){return e%3==0}},new function(){this._dj=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this._fw(r,n)&&t.flip(n,r)},this._fw=function(t,e){return(t+e)%3==0}},new function(){this._dj=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this._fw(r,n)&&t.flip(n,r)},this._fw=function(t,e){return 0==(E(t,1)+e/3&1)}},new function(){this._dj=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this._fw(r,n)&&t.flip(n,r)},this._fw=function(t,e){var r=t*e;return(1&r)+r%3==0}},new function(){this._dj=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this._fw(r,n)&&t.flip(n,r)},this._fw=function(t,e){var r=t*e;return 0==((1&r)+r%3&1)}},new function(){this._dj=function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)this._fw(r,n)&&t.flip(n,r)},this._fw=function(t,e){return 0==((t+e&1)+t*e%3&1)}}),A._bb=new A(285),A._bc=new A(301),A._bd=function(t,e){return t^e};var M={};M.rsDecoder=new function(t){this._fa=t,this.decode=function(t,e){for(var r=new b(this._fa,t),n=new Array(e),i=0;i<n.length;i++)n[i]=0;for(var a=!0,o=0;o<e;o++){var h=r.evaluateAt(this._fa.exp(o));n[n.length-1-o]=h,0!=h&&(a=!1)}if(!a)for(var s=new b(this._fa,n),u=this._eb(this._fa._ba(e,1),s,e),f=u[0],w=u[1],_=this._ey(f),c=this._di(w,_,!1),d=0;d<_.length;d++){var l=t.length-1-this._fa.log(_[d]);if(l<0)throw"ReedSolomonException Bad error location";t[l]=A._bd(t[l],c[d])}},this._eb=function(t,e,r){if(t._ec<e._ec){var n=t;t=e,e=n}for(var i=t,a=e,o=this._fa.One,h=this._fa.Zero,s=this._fa.Zero,u=this._fa.One;a._ec>=Math.floor(r/2);){var f=i,w=o,_=s;if(o=h,s=u,(i=a).Zero)throw"r_{i-1} was zero";a=f;for(var c=this._fa.Zero,d=i._ex(i._ec),l=this._fa.inverse(d);a._ec>=i._ec&&!a.Zero;){var g=a._ec-i._ec,v=this._fa.multiply(a._ex(a._ec),l);c=c._bd(this._fa._ba(g,v)),a=a._bd(i._dc(g,v))}h=c.multiply1(o)._bd(w),u=c.multiply1(s)._bd(_)}var m=u._ex(0);if(0==m)throw"ReedSolomonException sigmaTilde(0) was zero";var p=this._fa.inverse(m),y=u.multiply2(p),b=a.multiply2(p);return new Array(y,b)},this._ey=function(t){var e=t._ec;if(1==e)return new Array(t._ex(1));for(var r=new Array(e),n=0,i=1;i<256&&n<e;i++)0==t.evaluateAt(i)&&(r[n]=this._fa.inverse(i),n++);if(n!=e)throw"Error locator degree does not match number of roots";return r},this._di=function(t,e,r){for(var n=e.length,i=new Array(n),a=0;a<n;a++){for(var o=this._fa.inverse(e[a]),h=1,s=0;s<n;s++)a!=s&&(h=this._fa.multiply(h,A._bd(1,this._fa.multiply(e[s],o))));i[a]=this._fa.multiply(t.evaluateAt(o),this._fa.inverse(h)),r&&(i[a]=this._fa.multiply(i[a],o))}return i}}(A._bb),M.correctErrors=function(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;i++)n[i]=255&t[i];var a=t.length-e;try{M.rsDecoder.decode(n,a)}catch(t){throw t}for(var o=0;o<e;o++)t[o]=n[o]},M.decode=function(t){for(var e=new p(t),r=e._cq(),n=e._cm()._cg,i=e._gk(),a=m._gn(i,r,n),o=0,h=0;h<a.length;h++)o+=a[h]._du;for(var s=new Array(o),u=0,f=0;f<a.length;f++){var w=a[f],_=w.Codewords,c=w._du;M.correctErrors(_,c);for(var d=0;d<c;d++)s[u++]=_[d]}return new x(s,r._fd,n.Bits)};var C={};function E(t,e){return t>=0?t>>e:(t>>e)+(2<<~e)}function k(t,e,r){this.x=t,this.y=e,this.count=1,this._aj=r,this.__defineGetter__("_ei",(function(){return this._aj})),this.__defineGetter__("Count",(function(){return this.count})),this.__defineGetter__("X",(function(){return this.x})),this.__defineGetter__("Y",(function(){return this.y})),this._ek=function(){this.count++},this._ev=function(t,e,r){if(Math.abs(e-this.y)<=t&&Math.abs(r-this.x)<=t){var n=Math.abs(t-this._aj);return n<=1||n/this._aj<=1}return!1}}function D(t){this._go=t[0],this._gu=t[1],this._gr=t[2],this.__defineGetter__("_gp",(function(){return this._go})),this.__defineGetter__("_gq",(function(){return this._gu})),this.__defineGetter__("_gs",(function(){return this._gr}))}function B(){this.image=null,this._cv=[],this._ge=!1,this._al=new Array(0,0,0,0,0),this._am=null,this.__defineGetter__("_da",(function(){return this._al[0]=0,this._al[1]=0,this._al[2]=0,this._al[3]=0,this._al[4]=0,this._al})),this._ao=function(t){for(var e=0,r=0;r<5;r++){var n=t[r];if(0==n)return!1;e+=n}if(e<7)return!1;var i=Math.floor((e<<8)/7),a=Math.floor(i/2);return Math.abs(i-(t[0]<<8))<a&&Math.abs(i-(t[1]<<8))<a&&Math.abs(3*i-(t[2]<<8))<3*a&&Math.abs(i-(t[3]<<8))<a&&Math.abs(i-(t[4]<<8))<a},this._an=function(t,e){return e-t[4]-t[3]-t[2]/2},this._ap=function(t,e,r,n){for(var i=this.image,a=C.height,o=this._da,h=t;h>=0&&i[e+h*C.width];)o[2]++,h--;if(h<0)return NaN;for(;h>=0&&!i[e+h*C.width]&&o[1]<=r;)o[1]++,h--;if(h<0||o[1]>r)return NaN;for(;h>=0&&i[e+h*C.width]&&o[0]<=r;)o[0]++,h--;if(o[0]>r)return NaN;for(h=t+1;h<a&&i[e+h*C.width];)o[2]++,h++;if(h==a)return NaN;for(;h<a&&!i[e+h*C.width]&&o[3]<r;)o[3]++,h++;if(h==a||o[3]>=r)return NaN;for(;h<a&&i[e+h*C.width]&&o[4]<r;)o[4]++,h++;if(o[4]>=r)return NaN;var s=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(s-n)>=2*n?NaN:this._ao(o)?this._an(o,h):NaN},this._ej=function(t,e,r,n){for(var i=this.image,a=C.width,o=this._da,h=t;h>=0&&i[h+e*C.width];)o[2]++,h--;if(h<0)return NaN;for(;h>=0&&!i[h+e*C.width]&&o[1]<=r;)o[1]++,h--;if(h<0||o[1]>r)return NaN;for(;h>=0&&i[h+e*C.width]&&o[0]<=r;)o[0]++,h--;if(o[0]>r)return NaN;for(h=t+1;h<a&&i[h+e*C.width];)o[2]++,h++;if(h==a)return NaN;for(;h<a&&!i[h+e*C.width]&&o[3]<r;)o[3]++,h++;if(h==a||o[3]>=r)return NaN;for(;h<a&&i[h+e*C.width]&&o[4]<r;)o[4]++,h++;if(o[4]>=r)return NaN;var s=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(s-n)>=n?NaN:this._ao(o)?this._an(o,h):NaN},this._cu=function(t,e,r){var n=t[0]+t[1]+t[2]+t[3]+t[4],i=this._an(t,r),a=this._ap(e,Math.floor(i),t[2],n);if(!isNaN(a)&&(i=this._ej(Math.floor(i),Math.floor(a),t[2],n),!isNaN(i))){for(var o=n/7,h=!1,s=this._cv.length,u=0;u<s;u++){var f=this._cv[u];if(f._ev(o,a,i)){f._ek(),h=!0;break}}if(!h){var w=new k(i,a,o);this._cv.push(w),null!=this._am&&this._am._ep(w)}return!0}return!1},this._ee=function(){var t=this._cv.length;if(t<3)throw"Couldn't find enough finder patterns (found "+t+")";if(t>3){for(var e=0,r=0,n=0;n<t;n++){var i=this._cv[n]._ei;e+=i,r+=i*i}var a=e/t;this._cv.sort((function(t,e){var r=Math.abs(e._ei-a),n=Math.abs(t._ei-a);return r<n?-1:r==n?0:1}));for(var o=Math.sqrt(r/t-a*a),h=Math.max(.2*a,o),s=this._cv.length-1;s>=0;s--){var u=this._cv[s];Math.abs(u._ei-a)>h&&this._cv.splice(s,1)}}return this._cv.length>3&&this._cv.sort((function(t,e){return t.count>e.count?-1:t.count<e.count?1:0})),new Array(this._cv[0],this._cv[1],this._cv[2])},this._eq=function(){var t=this._cv.length;if(t<=1)return 0;for(var e=null,r=0;r<t;r++){var n=this._cv[r];if(n.Count>=2){if(null!=e)return this._ge=!0,Math.floor((Math.abs(e.X-n.X)-Math.abs(e.Y-n.Y))/2);e=n}}return 0},this._cx=function(){for(var t=0,e=0,r=this._cv.length,n=0;n<r;n++){var i=this._cv[n];i.Count>=2&&(t++,e+=i._ei)}if(t<3)return!1;for(var a=e/r,o=0,h=0;h<r;h++){var s=this._cv[h];o+=Math.abs(s._ei-a)}return o<=.05*e},this._ce=function(t){this.image=t;var e=C.height,r=C.width,n=Math.floor(3*e/228);n<3&&(n=3);for(var i=!1,a=new Array(5),o=n-1;o<e&&!i;o+=n){a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0;for(var h=0,s=0;s<r;s++)if(t[s+o*C.width])1==(1&h)&&h++,a[h]++;else if(0==(1&h))if(4==h)if(this._ao(a)){if(this._cu(a,o,s))if(n=2,this._ge)i=this._cx();else{var u=this._eq();u>a[2]&&(o+=u-a[2]-n,s=r-1)}else{do{s++}while(s<r&&!t[s+o*C.width]);s--}h=0,a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0}else a[0]=a[2],a[1]=a[3],a[2]=a[4],a[3]=1,a[4]=0,h=3;else a[++h]++;else a[h]++;if(this._ao(a))this._cu(a,o,r)&&(n=a[0],this._ge&&(i=this._cx()))}var f=this._ee();return C._er(f),new D(f)}}function N(t,e,r){this.x=t,this.y=e,this.count=1,this._aj=r,this.__defineGetter__("_ei",(function(){return this._aj})),this.__defineGetter__("Count",(function(){return this.count})),this.__defineGetter__("X",(function(){return Math.floor(this.x)})),this.__defineGetter__("Y",(function(){return Math.floor(this.y)})),this._ek=function(){this.count++},this._ev=function(t,e,r){if(Math.abs(e-this.y)<=t&&Math.abs(r-this.x)<=t){var n=Math.abs(t-this._aj);return n<=1||n/this._aj<=1}return!1}}function L(t,e,r,n,i,a,o){this.image=t,this._cv=new Array,this.startX=e,this.startY=r,this.width=n,this.height=i,this._ef=a,this._al=new Array(0,0,0),this._am=o,this._an=function(t,e){return e-t[2]-t[1]/2},this._ao=function(t){for(var e=this._ef,r=e/2,n=0;n<3;n++)if(Math.abs(e-t[n])>=r)return!1;return!0},this._ap=function(t,e,r,n){var i=this.image,a=C.height,o=this._al;o[0]=0,o[1]=0,o[2]=0;for(var h=t;h>=0&&i[e+h*C.width]&&o[1]<=r;)o[1]++,h--;if(h<0||o[1]>r)return NaN;for(;h>=0&&!i[e+h*C.width]&&o[0]<=r;)o[0]++,h--;if(o[0]>r)return NaN;for(h=t+1;h<a&&i[e+h*C.width]&&o[1]<=r;)o[1]++,h++;if(h==a||o[1]>r)return NaN;for(;h<a&&!i[e+h*C.width]&&o[2]<=r;)o[2]++,h++;if(o[2]>r)return NaN;var s=o[0]+o[1]+o[2];return 5*Math.abs(s-n)>=2*n?NaN:this._ao(o)?this._an(o,h):NaN},this._cu=function(t,e,r){var n=t[0]+t[1]+t[2],i=this._an(t,r),a=this._ap(e,Math.floor(i),2*t[1],n);if(!isNaN(a)){for(var o=(t[0]+t[1]+t[2])/3,h=this._cv.length,s=0;s<h;s++){if(this._cv[s]._ev(o,a,i))return new N(i,a,o)}var u=new N(i,a,o);this._cv.push(u),null!=this._am&&this._am._ep(u)}return null},this.find=function(){for(var e=this.startX,i=this.height,a=e+n,o=r+(i>>1),h=new Array(0,0,0),s=0;s<i;s++){var u=o+(0==(1&s)?s+1>>1:-(s+1>>1));h[0]=0,h[1]=0,h[2]=0;for(var f=e;f<a&&!t[f+C.width*u];)f++;for(var w=0;f<a;){if(t[f+u*C.width])if(1==w)h[w]++;else if(2==w){if(this._ao(h)){var _=this._cu(h,u,f);if(null!=_)return _}h[0]=h[2],h[1]=1,h[2]=0,w=1}else h[++w]++;else 1==w&&w++,h[w]++;f++}if(this._ao(h)){var c=this._cu(h,u,a);if(null!=c)return c}}if(0!=this._cv.length)return this._cv[0];throw"Couldn't find enough alignment patterns"}}function x(t,e,r){this._ed=0,this._cw=7,this.dataLength=0,this.blocks=t,this._en=r,e<=9?this.dataLengthMode=0:e>=10&&e<=26?this.dataLengthMode=1:e>=27&&e<=40&&(this.dataLengthMode=2),this._gd=function(t){var e=0;if(t<this._cw+1){for(var r=0,n=0;n<t;n++)r+=1<<n;return r<<=this._cw-t+1,e=(this.blocks[this._ed]&r)>>this._cw-t+1,this._cw-=t,e}if(t<this._cw+1+8){for(var i=0,a=0;a<this._cw+1;a++)i+=1<<a;return e=(this.blocks[this._ed]&i)<<t-(this._cw+1),this._ed++,e+=this.blocks[this._ed]>>8-(t-(this._cw+1)),this._cw=this._cw-t%8,this._cw<0&&(this._cw=8+this._cw),e}if(t<this._cw+1+16){for(var o=0,h=0,s=0;s<this._cw+1;s++)o+=1<<s;var u=(this.blocks[this._ed]&o)<<t-(this._cw+1);this._ed++;var f=this.blocks[this._ed]<<t-(this._cw+1+8);this._ed++;for(var w=0;w<t-(this._cw+1+8);w++)h+=1<<w;return h<<=8-(t-(this._cw+1+8)),e=u+f+((this.blocks[this._ed]&h)>>8-(t-(this._cw+1+8))),this._cw=this._cw-(t-8)%8,this._cw<0&&(this._cw=8+this._cw),e}return 0},this.NextMode=function(){return this._ed>this.blocks.length-this._en-2?0:this._gd(4)},this.getDataLength=function(t){for(var e=0;t>>e!=1;)e++;return this._gd(C._eo[this.dataLengthMode][e])},this.getRomanAndFigureString=function(t){var e=t,r=0,n="",i=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do{if(e>1){var a=(r=this._gd(11))%45;n+=i[Math.floor(r/45)],n+=i[a],e-=2}else 1==e&&(n+=i[r=this._gd(6)],e-=1)}while(e>0);return n},this.getFigureString=function(t){var e=t,r=0,n="";do{e>=3?((r=this._gd(10))<100&&(n+="0"),r<10&&(n+="0"),e-=3):2==e?((r=this._gd(7))<10&&(n+="0"),e-=2):1==e&&(r=this._gd(4),e-=1),n+=r}while(e>0);return n},this.get8bitByteArray=function(t){var e=t,r=0,n=new Array;do{r=this._gd(8),n.push(r),e--}while(e>0);return n},this.getKanjiString=function(t){var e=t,r=0,n="";do{var i=((r=this._gd(13))/192<<8)+r%192,a=0;a=i+33088<=40956?i+33088:i+49472,n+=String.fromCharCode(a),e--}while(e>0);return n},this.__defineGetter__("DataByte",(function(){for(var t=new Array;;){var e=this.NextMode();if(0==e){if(t.length>0)break;throw"Empty data block"}if(1!=e&&2!=e&&4!=e&&8!=e)throw"Invalid mode: "+e+" in (block:"+this._ed+" bit:"+this._cw+")";var r=this.getDataLength(e);if(r<1)throw"Invalid data length: "+r;switch(e){case 1:for(var n=this.getFigureString(r),i=new Array(n.length),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);t.push(i);break;case 2:for(var o=this.getRomanAndFigureString(r),h=new Array(o.length),s=0;s<o.length;s++)h[s]=o.charCodeAt(s);t.push(i);break;case 4:var u=this.get8bitByteArray(r);t.push(u);break;case 8:var f=this.getKanjiString(r);t.push(f)}}return t}))}return C.success=!1,C.errorMessage="",C.originError=null,C.result="",C.pushError=function(t){console.error(t),"string"!=typeof t&&(C.originError=t,t="object"===n(t)?JSON.stringify(t):t.toString()),C.errorMessage+=t+";"},C.imagedata=null,C.width=0,C.height=0,C.qrCodeSymbol=null,C.debug=!1,C.maxImgSize=1048576,C._eo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],C.callback=null,C.triggerCallback=function(){null!=C.callback&&(C.originError&&console.error(C.originError),C.callback({result:C.result,success:""===C.errorMessage,time:C.time||0,errorMessage:C.errorMessage,error:C.originError}))},C.vidSuccess=function(t){C.localstream=t,C.webkit?C.video.src=window.webkitURL.createObjectURL(t):C.moz?(C.video.mozSrcObject=t,C.video.play()):C.video.src=t,C.gUM=!0,C.canvas_qr2=document.createElement("canvas"),C.canvas_qr2.id="qr-canvas",C.qrcontext2=C.canvas_qr2.getContext("2d"),C.canvas_qr2.width=C.video.videoWidth,C.canvas_qr2.height=C.video.videoHeight,setTimeout(C.captureToCanvas,500)},C.vidError=function(){C.gUM=!1},C.captureToCanvas=function(){if(C.gUM)try{if(0==C.video.videoWidth)return void setTimeout(C.captureToCanvas,500);C.canvas_qr2.width=C.video.videoWidth,C.canvas_qr2.height=C.video.videoHeight,C.qrcontext2.drawImage(C.video,0,0);try{C.decode()}catch(t){C.pushError(t),setTimeout(C.captureToCanvas,500)}}catch(t){C.pushError(t),setTimeout(C.captureToCanvas,500)}},C.setWebcam=function(t){var e=navigator;C.video=document.getElementById(t);var r=!0;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{navigator.mediaDevices.enumerateDevices().then((function(t){t.forEach((function(t){console.log("deb1"),"videoinput"===t.kind&&t.label.toLowerCase().search("back")>-1&&(r=[{sourceId:t.deviceId}]),console.log(t.kind+": "+t.label+" id = "+t.deviceId)}))}))}catch(t){C.pushError(t)}else console.log("no navigator.mediaDevices.enumerateDevices");e.getUserMedia?e.getUserMedia({video:r,audio:!1},C.vidSuccess,C.vidError):e.webkitGetUserMedia?(C.webkit=!0,e.webkitGetUserMedia({video:r,audio:!1},C.vidSuccess,C.vidError)):e.mozGetUserMedia&&(C.moz=!0,e.mozGetUserMedia({video:r,audio:!1},C.vidSuccess,C.vidError))},C.decode=function(t){var e,r;if(0==arguments.length)return C.canvas_qr2?(r=C.canvas_qr2,e=C.qrcontext2):e=(r=document.getElementById("qr-canvas")).getContext("2d"),C.width=r.width,C.height=r.height,C.imagedata=e.getImageData(0,0,C.width,C.height),C.result=C.process(e),C.triggerCallback(),C.result;var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var t=document.getElementById("out-canvas");if(null!=t){var e=t.getContext("2d");e.clearRect(0,0,320,240),e.drawImage(n,0,0,320,240)}var r=document.createElement("canvas"),i=r.getContext("2d"),a=n.height,o=n.width;if(n.width*n.height>C.maxImgSize){var h=n.width/n.height;o=h*(a=Math.sqrt(C.maxImgSize/h))}r.width=o,r.height=a,i.drawImage(n,0,0,r.width,r.height),C.width=r.width,C.height=r.height;try{C.imagedata=i.getImageData(0,0,r.width,r.height)}catch(t){return C.pushError("Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!"),void C.triggerCallback()}try{C.result=C.process(i)}catch(t){C.pushError(t),C.pushError("error decoding QR Code")}C.triggerCallback()},n.onerror=function(){C.pushError("Failed to load the image"),C.triggerCallback()},n.src=t},C.isUrl=function(t){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t)},C.decode_url=function(t){var e="";try{e=escape(t)}catch(r){C.pushError(r),e=t}var r="";try{r=decodeURIComponent(e)}catch(t){C.pushError(t),r=e}return r},C.decode_utf8=function(t){return C.isUrl(t)?C.decode_url(t):t},C.process=function(t){var e=(new Date).getTime(),r=C.grayScaleToBitmap(C.grayscale());if(C.debug){for(var n=0;n<C.height;n++)for(var i=0;i<C.width;i++){var a=4*i+n*C.width*4;C.imagedata.data[a]=(r[i+n*C.width],0),C.imagedata.data[a+1]=(r[i+n*C.width],0),C.imagedata.data[a+2]=r[i+n*C.width]?255:0}t.putImageData(C.imagedata,0,0)}var o=new h(r).detect();if(C.debug){for(var s=0;s<o.bits.Height;s++)for(var u=0;u<o.bits.Width;u++){var f=4*u*2+2*s*C.width*4;C.imagedata.data[f]=(o.bits._ds(u,s),0),C.imagedata.data[f+1]=(o.bits._ds(u,s),0),C.imagedata.data[f+2]=o.bits._ds(u,s)?255:0}t.putImageData(C.imagedata,0,0)}for(var w=M.decode(o.bits).DataByte,_="",c=0;c<w.length;c++)for(var d=0;d<w[c].length;d++)_+=String.fromCharCode(w[c][d]);var l=(new Date).getTime()-e;return C.time=l,C.decode_utf8(_)},C.getPixel=function(t,e){if(C.width<t)throw"point error";if(C.height<e)throw"point error";var r=4*t+e*C.width*4;return(33*C.imagedata.data[r]+34*C.imagedata.data[r+1]+33*C.imagedata.data[r+2])/100},C.binarize=function(t){for(var e=new Array(C.width*C.height),r=0;r<C.height;r++)for(var n=0;n<C.width;n++){var i=C.getPixel(n,r);e[n+r*C.width]=i<=t}return e},C._em=function(t){for(var e=Math.floor(C.width/4),r=Math.floor(C.height/4),n=new Array(4),i=0;i<4;i++){n[i]=new Array(4);for(var a=0;a<4;a++)n[i][a]=new Array(0,0)}for(var o=0;o<4;o++)for(var h=0;h<4;h++){n[h][o][0]=255;for(var s=0;s<r;s++)for(var u=0;u<e;u++){var f=t[e*h+u+(r*o+s)*C.width];f<n[h][o][0]&&(n[h][o][0]=f),f>n[h][o][1]&&(n[h][o][1]=f)}}for(var w=new Array(4),_=0;_<4;_++)w[_]=new Array(4);for(var c=0;c<4;c++)for(var d=0;d<4;d++)w[d][c]=Math.floor((n[d][c][0]+n[d][c][1])/2);return w},C.grayScaleToBitmap=function(t){for(var e=C._em(t),r=e.length,n=Math.floor(C.width/r),i=Math.floor(C.height/r),a=new window.ArrayBuffer(C.width*C.height),o=new window.Uint8Array(a),h=0;h<r;h++)for(var s=0;s<r;s++)for(var u=0;u<i;u++)for(var f=0;f<n;f++)o[n*s+f+(i*h+u)*C.width]=t[n*s+f+(i*h+u)*C.width]<e[s][h];return o},C.grayscale=function(){for(var t=new window.ArrayBuffer(C.width*C.height),e=new window.Uint8Array(t),r=0;r<C.height;r++)for(var n=0;n<C.width;n++){var i=C.getPixel(n,r);e[n+r*C.width]=i}return e},C._er=function(t){function e(t,e){var r=t.X-e.X,n=t.Y-e.Y;return Math.sqrt(r*r+n*n)}var r,n,i,a,o,h,s,u,f=e(t[0],t[1]),w=e(t[1],t[2]),_=e(t[0],t[2]);if(w>=f&&w>=_?(n=t[0],r=t[1],i=t[2]):_>=w&&_>=f?(n=t[1],r=t[0],i=t[2]):(n=t[2],r=t[0],i=t[1]),a=r,h=i,s=(o=n).x,u=o.y,(h.x-s)*(a.y-u)-(h.y-u)*(a.x-s)<0){var c=r;r=i,i=c}t[0]=r,t[1]=n,t[2]=i},C}();r.decode(t),r.callback=function(r){r.image=t,e(r)}}))}function G(t){return O(t)}function R(t){var e=document.createElement("canvas");return e.width=t.videoWidth,e.height=t.videoHeight,e.getContext("2d").drawImage(t,0,0,e.width,e.height),j(e)}function j(t){return G(t.toDataURL("image/jpg"))}function q(t){return new Promise((function(e){var r=document.createElement("div");X(t,r);var n=r.children[1];n.onload=function(){e(n)}}))}function U(t){return x(this,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return[4,q(t)];case 1:return[2,e.sent().src]}}))}))}function X(t,e){return new L(e,t)}e.default={decodeBindInput:S,decodeFromFile:T,decodeFromImage:P,decodeFromBase64:G,decodeFromCanvas:j,decodeFromUrl:O,decodeFromVideo:R,encodeAsBase64:U,encodeAsImage:q,encodeBindDom:X,version:"1.0.0"}}]).default}));